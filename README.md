# АК (Архитектура компьютерных систем)

# Страничка семинаров ЗБ-ПИ21-1 ЗБ-ПИ21-2


## Навигация по семинарам
1.  [[конспект](01sem-asm/README.md)][asm] - введение в язык ассемблера
2.  [[конспект](02sem-asm/README.md)][asm] - продолжение языка ассемблера - сдвиги, loop, simpleio
3. [[конспект](03sem-asm/README.md)][asm] - язык ассемблера. Arrays, variables, lea, lea для арифметики
4. [[конспект](04sem-asm/README.md)][asm] - стек. Работа с asm из C/C++ и наборот. printf/scanf. Cdecl
5. [конспект][c] - буферизация, выравнивание
6. [конспект][c] - системные вызовы
7. [[конспект](07sem-c/README.md)][c] - динамическая память.
8. [[конспект](08sem-c/README.md)][c] - IEEE754. float. inline asm.
9. [[конспект](09sem-os)][OS] - Yabloko. Анимируем елку.
10. [[конспект](10sem-os)][OS] - Yabloko. Добавляем поддержку shift в драйвер клавиатуры. Пишет свой sleep, используя Programmable Interval Timer.
11. [конспект][OS] - Yabloko. Добавляем свои системные вызовы. Разбираемся, как запускать пользовательские программы.
12. [[конспект](12sem-fs)][FS] - Работа с файлами и правами.
13. [[конспект](13sem-fs)][FS] - Mmap. + немного OOM.
14. [[конспект](14sem-fs)][FS] - Fork.
15. [[конспект](15sem-fs)][FS] - Exec. Pipe.
16. [[конспект](16sem-fs)][FS] - Сигналы. Sigaction.
17. [[конспект](17sem-fs)][FS] - время, mktime, gettimeofday, 2038 год, localtime
18. [fs]   - epoll, select, timer
19. [конспект][Cloud] - аренда сервера, запуск приложения, nginx, systemd
20. [конспект][FS] - pthreads
21. [конспект][FS] - mutex
22. [[конспект](22sem-fs/README.md)][C++] - std::thread, std::async, std::future, std::promise, std::lock_guard
 


 ## Содержание дисциплины
- # Раздел 1. Архитектура процессоров
[Тема 1. Язык ассемблера](01lec-asm/README.md)</br>
Инструкции языка ассемблера. Операнды, способы адресации. Регистры процессора. Оперативная память. Константы в языке ассемблера.

[Тема 2. Программирование на языке ассемблера](02lec-asm/README.md)</br>
Порядок выполнения программы. Арифметические и логические инструкции. Ветвление программ. Условные операторы. Циклы. Массивы. Вызовы функций. Псевдокоманды ассемблера.


[Тема 3. Машинный язык](03lec-asm/README.md)</br>
Инструкции и типы инструкций. Инструкции типов R, I, S/B, U/J. Кодирование констант. Расшифровка машинных команд.

[Тема 4. Процесс сборки программ](04lec-asm/README.md)</br>
Карта памяти. Директивы ассемблера. Компиляция, трансляция, компоновка. Загрузка программ.

[Тема 5. Дополнительные аспекты ассемблера](05lec-asm/README.md)</br>
Порядок байтов. Исключения. Работа с числами со знаком и без знака. Работа с числами с плавающей запятой. Сжатые инструкции.

[Тема 6. Архитектура x86](06lec-asm/README.md)</br>
Регистры x86. Операнды x86. Флаги состояния. Команды x86. Кодировка команд x86. Расширения архитектуры x86.

- # Раздел 2. Микроархитектура
Тема 1. Введение в микроархитектуру
Архитектурное состояние и система команд. Процесс разработки микроархитектуры. Виды микроархитектур.

Тема 2. Однотактный процессор
Однотактный тракт данных. Однотактный блок управления. Дополнительные команды. Анализ производительности.

Тема 3. Многотактный процессор
Многотактный тракт данных. Многотактный блок управления. Дополнительные команды. Анализ производительности.

Тема 4. Конвейерный процессор
Конвейерный тракт данных. Конвейерный блок управления. Конфликты. Дополнительные команды. Анализ производительности.

Тема 5. Улучшенные микроархитектуры
Длинные конвейеры. Предсказание условных переходов. Суперскалярные процессоры. Процессоры с внеочередным выполнением команд. Переименование регистров. Многопоточность. Мультипроцессоры.

- # Раздел 3. Системы памяти
Тема 1. Кэш-память
Хранение данных в кэш-памяти. Поиск данных в кэш-памяти. Изменение данных в кэш-памяти. Улучшенный кэш.

Тема 2. Виртуальная память
Трансляция адресов. Таблица страниц. Защита памяти. Стратегия замещения страниц. Многоуровневые таблицы страниц.

- # Раздел 4. Ввод/вывод во встраиваемых системах
Тема 1. Ввод/вывод во встраиваемых системах
Цифровой ввод/вывод общего назначения. Последовательный ввод/вывод. Таймеры. Аналоговый ввод/вывод. Прерывания.


# Примерные вопросы к контрольной работе 

1. Регистры общего назначения архитектуры x86.
2. Понятие микрокоманды. Примеры микрокоманд.
3. Компоновка программ. Оптимизация при компоновке.
4. Маскирование прерываний.
5. Своппинг (swapping) и реализация «спящего режима».
6. Организация циклов на языке ассемблера.
7. Регистры флагов в распространенных процессорных архитектурах.
8. Организация работы с памятью, имеющей неравномерное время доступа (NUMA).
9. Принципы функционирования сопроцессора.
10. Однотактный тракт данных.
# Примерные задания контрольной работы 
1. На языке ассемблера для архитектуры x86 написать подпрограмму, реализующую возведение целого числа в степень целого числа.
2. Перевести в десятичный вид число 0x0A32B415 в предположении, что порядок байтов остроконечный.
3. Определить, какая команда архитектуры x86 представлена значением 0xB805000000.
4. На языке SystemVerilog реализовать основной декодер однотактного процессора.
5. Определить, сколько тактов потребуется, чтобы выполнить следующую программу на многотактном процессоре архитектуры RISC-V:
```asm
addi s0, zero, 5
L1:
bge zero, s0, Done 
addi s0, s0, –1
j L1
Done:
```


Примерные задания для подготовки к экзамену 
1. Преобразуйте следующий ассемблерный код RISC-V в машинный код. Запишите команды в шестнадцатеричном формате.
```
    addi s3, s4, 28
    sll t1, t2, t3
    srli s3, s1, 14
    sw s9, 16(t4)
```

2. Переведите приведенные ниже инструкции условного перехода в машинный код. Адреса инструкций указаны слева от каждой из них:
```
0x0000A000 beq t4, zero, Loop
0x0000A004 ...
0x0000A008 ...
0x0000A00C Loop: ...
```

3. Расширьте набор команд RISC-V, включив в него lwpostinc (load with postincrement) – команду чтения из памяти с последующим приращением адреса. Ассемблерная инструкция lwpostinc rd, imm (rs) эквивалентна следующим двум инструкциям:
```
lw rd, 0(rs)
addi rs, rs, imm
```

4. Вычислить величину CPI (количество команд на такт для следующей программы):
```
addi s0, zero, 5
L1:
bge zero, s0, Done 
addi s0, s0, –1 
j L1
Done:
```
5. Подсистема виртуальной памяти использует реализованную аппаратно одноуровневую таблицу страниц, включающую блоки памяти SRAM и сопутствующую логику. Она поддерживает 25-битные виртуальные адреса, 22-битные физические адреса и страницы размером 64 Кбайт. В каждой записи таблицы страниц имеется бит достоверности V и бит изменения D. Чему равен размер всей таблицы в битах?

# Примерные вопросы для подготовки к экзамену 
1. Язык ассемблера. Мнемоники. Инструкции, операнды, регистры.
2. Память. Адресация памяти. База и смещение, индекс.
3. Логические инструкции. Логические маски. Установка и сброс битов.
4. Инструкции арифметического и логического сдвига.
5. Инструкции умножения. Особенности целочисленного умножения.
6. Инструкции условного перехода. Сравнение целочисленных значений.
7. Безусловные переходы. Типы операндов инструкций безусловного перехода. Ближние и дальние переходы.
8. Реализация операций выбора на языке ассемблера. Таблицы переходов.
9. Реализация циклов и повторений на языке ассемблера. Метки.
10. Представления массивов в языке ассемблера. Адресация массивов.
11. Байты и символы. Операции с байтами и символами.
12. Реализация подпрограмм на языке ассемблера. Стек вызовов. Аргументы, результаты и локальные переменные.
13. Псевдокоманды в языке ассемблера.
14. Кодировка регистровых инструкций в машинном коде.
15. Кодировка непосредственных инструкций в машинном коде.
16. Инструкции типа хранение/условный переход.
17. Инструкции типа старшие разряды константы/безусловный переход.
18. Кодирование констант в машинном коде архитектуры RISC-V.
19. Режимы адресации в машинном коде архитектуры RISC-V.
20. Карта оперативной памяти. Сегменты. Куча. 
21. Компиляция, трансляция, компоновка. Загрузка программ в память.
22. Обработка чисел с плавающей запятой. Векторные расширения.
23. Регистры общего назначения архитектуры x86.
24. Управляющие регистры архитектуры x86.
25. Основные команды архитектуры x86.
26. Кодировка машинных команд архитектуры x86.
27. Микроархитектура однотактных процессоров.
28. Микроархитектура многотактных процессоров.
29. Микроархитектура конвейерных процессоров.
30. Конфликты в конвейерных микроархитектурах и их разрешение.
31. Блоки предсказания переходов.
32. Суперскалярные процессоры. Внеочередное выполнение команд.
33. Многопоточность. Многопроцессорные архитектуры.
34. Кэш-память. Организация кэш-памяти. Многоуровневый кэш. Когерентность кэша.
35. Виртуальная память. Страничная организация памяти. Таблицы страниц.
36. Ввод/вывод общего назначения. Последовательный ввод/вывод.
37. Ввод/вывод с отображением в память. Виртуализация ввода/вывода.
# Пример экзаменационного билета
- Задание 1. Микроархитектура многотактных процессоров. (20 баллов)
- Задание 2. 	Кодировка регистровых инструкций в машинном коде. (20 баллов)
- Задание 3. Подсистема виртуальной памяти использует реализованную аппаратно одноуровневую таблицу страниц, включающую блоки памяти SRAM и сопутствующую логику. Она поддерживает 26-битные виртуальные адреса, 23-битные физические адреса и страницы размером 128 Кбайт. В каждой записи таблицы страниц имеется бит достоверности V и бит изменения D. Чему равен размер всей таблицы в битах? (20 баллов)


# Основная литература:
1. Новожилов, О. П. Архитектура ЭВМ и систем. В 2 ч. Ч. 1 : учеб. пособие для вузов / О. П. Новожилов. — Москва : Юрайт, 2023. — 276 с. — (Высшее образование). — ЭБС Юрайт. — URL: https://urait.ru/bcode/516640 (дата обращения: 28.04.2023). — Текст : электронный.

2. Новожилов, О. П. Архитектура ЭВМ и систем. В 2 ч. Ч. 2 : учеб. пособие для вузов / О. П. Новожилов. — Москва : Юрайт, 2023. — 246 с. — (Высшее образование). — ЭБС Юрайт. — URL: https://urait.ru/bcode/516641 (дата обращения: 28.04.2023). — Текст : электронный.

## Дополнительная литература:
3. Староверова, Н. А. Операционные системы : учебник / Н. А. Староверова. — Санкт-Петербург : Лань, 2022. — 308 с. —  ЭБС Лань. — URL: https://e.lanbook.com/book/207089 (дата обращения: 28.04.2023). —  Текст : электронный.

4. Фомин, Д. В. Основы компьютерной электроники : учеб. пособие / Д. В. Фомин. – изд. 2-е, стер. – Москва : Берлин : Директ-Медиа, 2019. – 110 с. – ЭБС Университетская библиотека online. – URL: https://biblioclub.ru/index.php?page=book&id=575234 (дата обращения: 28.04.2023). –Текст : электронный.

## Перечень ресурсов информационно-телекоммуникационной сети «Интернет», необходимых для освоения дисциплины
1.   Личный кабинет обучающегося  https://org.fa.ru
2. Электронная библиотека Финансового университета (ЭБ) http://elib.fa.ru/
3. Электронно-библиотечная система BOOK.RU http://www.book.ru
4. Онлайн-курс «Введение в архитектуру ЭВМ. Элементы операционных систем» https://stepik.org/course/253/ 
5. Электронно-библиотечная система «Университетская библиотека ОНЛАЙН» http://biblioclub.ru/
6. Электронно-библиотечная система Znanium http://www.znanium.com
7. Электронно-библиотечная система издательства «ЮРАЙТ» https://urait.ru/
8. Электронно-библиотечная система издательства Проспект http://ebs.prospekt.org/books
9. Электронно-библиотечная система издательства «Лань» https://e.lanbook.com/
10. Деловая онлайн-библиотека Alpina Digital http://lib.alpinadigital.ru/
11. Научная электронная библиотека eLibrary.ru http://elibrary.ru
12. Национальная электронная библиотека http://нэб.рф/
13. СПАРК https://spark-interfax.ru/
